<div class="activity-form col-md-8 offset-md-2">

<%= form_with(model: [timer, activity], id:"submit_form") do |form| %>

  <div class="form-row">
    <div class="form-group col-md-4">
      <small><%= form.label :title %></small>
    </div>
    <div class="form-group col-md-8">
      <%= form.text_field :title, class:"form-control", placeholder:"洗顔", required:true, maxlength:"256" %>
    </div>
  </div>

  <div class="form-row justify-content-md-end">
    <div class="form-group col-md-3">
      <%= form.number_field :minutes, class:"form-control", required:true, min:"0" %>
    </div>
    <div class="form-group col-md-1">
      <label><%= form.label :minutes %></label>
    </div>
    <div class="form-group col-md-3">
      <%= form.number_field :seconds, class:"form-control", required:true, min:"0", max:"59" %>
    </div>
    <div class="form-group col-md-1">
      <label><%= form.label :seconds %></label>
    </div>
  </div>

  <div class="text-right">
    <button id = "button" type="submit" class="btn btn-primary btn-sm">追加する</button>
  </div>
  <% end %>
</div>

<script type="text/javascript">

$(function() {

  $('#button').on('click', () => {

    // Form内のinput要素を全てチェック
    $('#submit_form input').each((_, e) => {
      // メッセージ表示用の要素を予め取得
      let resultFeild = $(e).next('p');

      if (!e.checkValidity()) {
        // エラー用の見た目に変える
        $(e).addClass('is-invalid');
        resultFeild.addClass('invalid-feedback');
        resultFeild.text(e.validationMessage);
      } else {
        // 元の見た目に戻す
        $(e).removeClass('is-invalid');
        resultFeild.removeClass('invalid-feedback');
        resultFeild.text('');
      }
    });
  })
})



</script>